{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many times did I run this week? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT COUNT(*)::int AS run_count FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND ua.activity_timestamp >= date_trunc('week', CURRENT_DATE - interval '1 day') + interval '1 day' AND ua.activity_timestamp < date_trunc('week', CURRENT_DATE - interval '1 day') + interval '8 days'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show me all my workouts from last month [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'workouts' AND ua.activity_timestamp >= date_trunc('month', CURRENT_DATE - interval '1 month') AND ua.activity_timestamp < date_trunc('month', CURRENT_DATE) ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What was my average pace for running? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT AVG((duration_val / 60.0) / (distance_val / 1000.0)) AS avg_pace_min_per_km FROM (SELECT ua.user_activity_id, MAX(CASE WHEN ad.activity_detail_type = 'duration' THEN uad.duration_in_sec END) AS duration_val, MAX(CASE WHEN ad.activity_detail_type = 'distance' THEN uad.distance_in_meters END) AS distance_val FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id JOIN activity_detail ad ON uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND ad.use_for_pace_calculation = true AND a.pace_type = 'minutesPerUom' GROUP BY ua.user_activity_id) sub WHERE distance_val > 0\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How far did I bike yesterday? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.distance_in_meters) / 1000.0 AS total_distance_km FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'bike | cycling | cycle') AND ua.activity_timestamp::date = CURRENT_DATE - interval '1 day'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"List my meditation sessions [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, COALESCE(ua.activity_name_override, '') AS name_override FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'meditation | meditate') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How long did I sleep last night? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT uad.duration_in_sec FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'sleep') AND ua.activity_timestamp::date = CURRENT_DATE - interval '1 day' AND uad.activity_detail_type = 'duration' LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my sports activities this year [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'sports' AND ua.activity_timestamp >= date_trunc('year', CURRENT_DATE) ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my total running distance this month? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.distance_in_meters) / 1000.0 AS total_km FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND uad.activity_detail_type = 'distance' AND ua.activity_timestamp >= date_trunc('month', CURRENT_DATE)\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Find my activities where I mentioned marathon [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.activity_name_override, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND (ua.comments ILIKE '%marathon%' OR ua.activity_name_override ILIKE '%marathon%') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many mind body activities did I do? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT COUNT(*)::int AS count FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'mind_body'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my swimming pace for this week [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, (duration_val / 60.0) / (distance_val / 100.0) AS pace_min_per_100m FROM (SELECT ua.user_activity_id, ua.activity_timestamp, MAX(CASE WHEN ad.activity_detail_type = 'duration' THEN uad.duration_in_sec END) AS duration_val, MAX(CASE WHEN ad.activity_detail_type = 'distance' THEN uad.distance_in_meters END) AS distance_val FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id JOIN activity_detail ad ON uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'swim') AND ad.use_for_pace_calculation = true AND a.pace_type = 'minutesPer100Uom' AND ua.activity_timestamp >= date_trunc('week', CURRENT_DATE - interval '1 day') + interval '1 day' GROUP BY ua.user_activity_id, ua.activity_timestamp) sub WHERE distance_val > 0 ORDER BY activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What outdoor activities did I do? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND uad.environment_value = 'outdoor' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How much water did I drink today? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.liquid_volume_in_liters) AS total_liters FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'water | hydration | drink') AND ua.activity_timestamp::date = CURRENT_DATE\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my weight lifting sessions with HIIT [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, sa.name AS sub_activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_sub_activity uasa ON ua.user_activity_id = uasa.user_activity_id JOIN sub_activity sa ON uasa.sub_activity_id = sa.sub_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'weight | lifting | strength') AND sa.name ILIKE '%HIIT%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What was my longest run? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, uad.distance_in_meters / 1000.0 AS distance_km FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND uad.activity_detail_type = 'distance' ORDER BY uad.distance_in_meters DESC LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many experiences have I logged? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT COUNT(*)::int AS count FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'experiences'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my rowing pace for the last 30 days [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, (duration_val / 60.0) / (distance_val / 500.0) AS pace_min_per_500m FROM (SELECT ua.user_activity_id, ua.activity_timestamp, MAX(CASE WHEN ad.activity_detail_type = 'duration' THEN uad.duration_in_sec END) AS duration_val, MAX(CASE WHEN ad.activity_detail_type = 'distance' THEN uad.distance_in_meters END) AS distance_val FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id JOIN activity_detail ad ON uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'row | rowing') AND ad.use_for_pace_calculation = true AND a.pace_type = 'minutesPer500m' AND ua.activity_timestamp >= CURRENT_DATE - interval '30 days' GROUP BY ua.user_activity_id, ua.activity_timestamp) sub WHERE distance_val > 0 ORDER BY activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"List my health activities [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'health' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What activities did I log on January 1st 2025? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND ua.activity_timestamp::date = '2025-01-01' ORDER BY ua.activity_timestamp\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many activities did I log each day this week? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp::date, 'Mon DD, YYYY') AS date, COUNT(*)::int AS count FROM user_activity ua WHERE ua.user_id = 'abc-123' AND ua.activity_timestamp >= date_trunc('week', CURRENT_DATE - interval '1 day') + interval '1 day' AND ua.activity_timestamp < date_trunc('week', CURRENT_DATE - interval '1 day') + interval '8 days' GROUP BY ua.activity_timestamp::date ORDER BY ua.activity_timestamp::date\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Find activities where I noted feeling tired [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND ua.comments ILIKE '%tired%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my fastest running pace? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT MIN((duration_val / 60.0) / (distance_val / 1000.0)) AS fastest_pace_min_per_km FROM (SELECT ua.user_activity_id, MAX(CASE WHEN ad.activity_detail_type = 'duration' THEN uad.duration_in_sec END) AS duration_val, MAX(CASE WHEN ad.activity_detail_type = 'distance' THEN uad.distance_in_meters END) AS distance_val FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id JOIN activity_detail ad ON uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND ad.use_for_pace_calculation = true AND a.pace_type = 'minutesPerUom' GROUP BY ua.user_activity_id) sub WHERE distance_val > 0\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show all my yoga sessions [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, COALESCE(ua.activity_name_override, '') AS session_name FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'yoga') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How much did I lift in total this week? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.weight_in_kilograms) AS total_kg FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'weight | lift | strength') AND ua.activity_timestamp >= date_trunc('week', CURRENT_DATE - interval '1 day') + interval '1 day'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my total exercise time today? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.duration_in_sec) AS total_seconds FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code IN ('workouts', 'sports') AND ua.activity_timestamp::date = CURRENT_DATE AND uad.activity_detail_type = 'duration'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my activities from the park [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND (ua.comments ILIKE '%park%' OR ua.activity_name_override ILIKE '%park%') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many days did I exercise last month? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT COUNT(DISTINCT ua.activity_timestamp::date)::int AS days FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code IN ('workouts', 'sports') AND ua.activity_timestamp >= date_trunc('month', CURRENT_DATE - interval '1 month') AND ua.activity_timestamp < date_trunc('month', CURRENT_DATE)\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What indoor activities have I done? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND uad.environment_value = 'indoor' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"List my recent activities [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' ORDER BY ua.activity_timestamp DESC LIMIT 10\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my average sleep duration? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT AVG(uad.duration_in_sec) AS avg_sleep_seconds FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'sleep') AND uad.activity_detail_type = 'duration'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show activities I named morning routine [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.activity_name_override FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND ua.activity_name_override ILIKE '%morning routine%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many calories did I burn this week? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.numeric_value) AS total_calories FROM user_activity ua JOIN activity_detail ad ON ad.activity_id = ua.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id AND uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ad.label ILIKE '%calorie%' AND ua.activity_timestamp >= date_trunc('week', CURRENT_DATE - interval '1 day') + interval '1 day'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What was my best swimming time? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT MIN(uad.duration_in_sec) AS best_time_seconds, to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'swim') AND uad.activity_detail_type = 'duration' GROUP BY ua.activity_timestamp ORDER BY MIN(uad.duration_in_sec) LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show me activities where I did intervals [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, sa.name AS sub_activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_sub_activity uasa ON ua.user_activity_id = uasa.user_activity_id JOIN sub_activity sa ON uasa.sub_activity_id = sa.sub_activity_id WHERE ua.user_id = 'abc-123' AND sa.name ILIKE '%interval%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my weekly activity count for this month? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT date_trunc('week', ua.activity_timestamp)::date AS week_start, COUNT(*)::int AS count FROM user_activity ua WHERE ua.user_id = 'abc-123' AND ua.activity_timestamp >= date_trunc('month', CURRENT_DATE) GROUP BY date_trunc('week', ua.activity_timestamp) ORDER BY week_start\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my hiking activities with elevation [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, uad.numeric_value AS elevation FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN activity_detail ad ON ad.activity_id = a.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id AND uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'hike | hiking') AND ad.label ILIKE '%elevation%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Which activities have I done the most? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT a.name AS activity, COUNT(*)::int AS count FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' GROUP BY a.name ORDER BY count DESC LIMIT 10\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How far did I walk last week? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.distance_in_meters) / 1000.0 AS total_km FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'walk') AND uad.activity_detail_type = 'distance' AND ua.activity_timestamp >= date_trunc('week', CURRENT_DATE - interval '1 day') + interval '1 day' - interval '1 week' AND ua.activity_timestamp < date_trunc('week', CURRENT_DATE - interval '1 day') + interval '1 day'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my pace trend for running over the last 3 months [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, (duration_val / 60.0) / (distance_val / 1000.0) AS pace_min_per_km FROM (SELECT ua.user_activity_id, ua.activity_timestamp, MAX(CASE WHEN ad.activity_detail_type = 'duration' THEN uad.duration_in_sec END) AS duration_val, MAX(CASE WHEN ad.activity_detail_type = 'distance' THEN uad.distance_in_meters END) AS distance_val FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id JOIN activity_detail ad ON uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND ad.use_for_pace_calculation = true AND a.pace_type = 'minutesPerUom' AND ua.activity_timestamp >= CURRENT_DATE - interval '3 months' GROUP BY ua.user_activity_id, ua.activity_timestamp) sub WHERE distance_val > 0 ORDER BY activity_timestamp\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What other activities did I do today? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'others' AND ua.activity_timestamp::date = CURRENT_DATE ORDER BY ua.activity_timestamp\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Find activities where I felt great [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND ua.comments ILIKE '%great%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my total distance across all activities this year? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.distance_in_meters) / 1000.0 AS total_km FROM user_activity ua JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND uad.activity_detail_type = 'distance' AND ua.activity_timestamp >= date_trunc('year', CURRENT_DATE)\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my stretching routine activities [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, COALESCE(ua.activity_name_override, '') AS routine_name FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'stretch | stretching') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How long was my last workout? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT uad.duration_in_sec FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'workouts' AND uad.activity_detail_type = 'duration' ORDER BY ua.activity_timestamp DESC LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Compare my running this month vs last month [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT CASE WHEN ua.activity_timestamp >= date_trunc('month', CURRENT_DATE) THEN 'This Month' ELSE 'Last Month' END AS period, COUNT(*)::int AS run_count, SUM(uad.distance_in_meters) / 1000.0 AS total_km FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id LEFT JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id AND uad.activity_detail_type = 'distance' WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND ua.activity_timestamp >= date_trunc('month', CURRENT_DATE - interval '1 month') GROUP BY CASE WHEN ua.activity_timestamp >= date_trunc('month', CURRENT_DATE) THEN 'This Month' ELSE 'Last Month' END ORDER BY period DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show activities with comments [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND ua.comments IS NOT NULL AND ua.comments != '' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What did I do on the weekend? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND EXTRACT(dow FROM ua.activity_timestamp) IN (0, 6) AND ua.activity_timestamp >= CURRENT_DATE - interval '7 days' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my cycling activities with sub-activities [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, string_agg(sa.name, ', ') AS sub_activities FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id LEFT JOIN user_activity_sub_activity uasa ON ua.user_activity_id = uasa.user_activity_id LEFT JOIN sub_activity sa ON uasa.sub_activity_id = sa.sub_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'cycle | cycling | bike') GROUP BY ua.user_activity_id, ua.activity_timestamp, a.name ORDER BY ua.activity_timestamp DESC\"}"}]}
