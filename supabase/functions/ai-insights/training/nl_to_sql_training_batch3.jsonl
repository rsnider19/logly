{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's the longest I've slept? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, uad.duration_in_sec AS duration_seconds FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'sleep') AND uad.activity_detail_type = 'duration' ORDER BY uad.duration_in_sec DESC LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my activities by category [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT ac.name AS category, COUNT(*)::int AS count FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' GROUP BY ac.name ORDER BY count DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many runs over 5km have I done? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT COUNT(*)::int AS runs_over_5km FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND uad.activity_detail_type = 'distance' AND uad.distance_in_meters >= 5000\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What activities did I do at the gym? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND (ua.comments ILIKE '%gym%' OR ua.activity_name_override ILIKE '%gym%') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my 10 most recent workouts [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'workouts' ORDER BY ua.activity_timestamp DESC LIMIT 10\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my cycling frequency per week? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(date_trunc('week', ua.activity_timestamp), 'Mon DD, YYYY') AS week_start, COUNT(*)::int AS rides FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'cycle | cycling | bike') AND ua.activity_timestamp >= CURRENT_DATE - interval '12 weeks' GROUP BY date_trunc('week', ua.activity_timestamp) ORDER BY week_start\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"List my foam rolling sessions [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'foam | roll | rolling | recovery') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my activities from new years day [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND ua.activity_timestamp::date = date_trunc('year', CURRENT_DATE)::date ORDER BY ua.activity_timestamp\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many sets did I do in my last weight session? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT uad.numeric_value AS sets FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN activity_detail ad ON ad.activity_id = a.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id AND uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'weight | strength | lift') AND ad.label ILIKE '%set%' ORDER BY ua.activity_timestamp DESC LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my total workout count? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT COUNT(*)::int AS total_workouts FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'workouts'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show activities where I used the track [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND (ua.comments ILIKE '%track%' OR ua.activity_name_override ILIKE '%track%') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my average steps per day? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT AVG(daily_steps)::int AS avg_steps_per_day FROM (SELECT ua.activity_timestamp::date AS date, SUM(uad.numeric_value) AS daily_steps FROM user_activity ua JOIN activity_detail ad ON ad.activity_id = ua.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id AND uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ad.label ILIKE '%step%' GROUP BY ua.activity_timestamp::date) sub\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my marathon training runs [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, uad.distance_in_meters / 1000.0 AS distance_km, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND (ua.comments ILIKE '%marathon%' OR ua.activity_name_override ILIKE '%marathon%') AND uad.activity_detail_type = 'distance' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How long have I spent stretching this week? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.duration_in_sec) AS total_seconds FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'stretch | stretching') AND uad.activity_detail_type = 'duration' AND ua.activity_timestamp >= date_trunc('week', CURRENT_DATE - interval '1 day') + interval '1 day'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What activities include tempo sub-activity? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, sa.name AS sub_activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_sub_activity uasa ON ua.user_activity_id = uasa.user_activity_id JOIN sub_activity sa ON uasa.sub_activity_id = sa.sub_activity_id WHERE ua.user_id = 'abc-123' AND sa.name ILIKE '%tempo%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my first activity ever [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' ORDER BY ua.activity_timestamp ASC LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my best 5k time? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT MIN(uad.duration_in_sec) AS best_time_seconds, to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id JOIN user_activity_detail uad2 ON ua.user_activity_id = uad2.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND uad.activity_detail_type = 'duration' AND uad2.activity_detail_type = 'distance' AND uad2.distance_in_meters BETWEEN 4900 AND 5100 GROUP BY ua.activity_timestamp ORDER BY MIN(uad.duration_in_sec) LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"List my trips outdoors [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.activity_name_override FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND uad.environment_value = 'outdoor' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show activities with distance over 10km [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, uad.distance_in_meters / 1000.0 AS distance_km FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND uad.activity_detail_type = 'distance' AND uad.distance_in_meters > 10000 ORDER BY uad.distance_in_meters DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What sports did I play last weekend? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'sports' AND ua.activity_timestamp >= date_trunc('week', CURRENT_DATE - interval '1 day') - interval '6 days' AND EXTRACT(dow FROM ua.activity_timestamp) IN (0, 6) ORDER BY ua.activity_timestamp\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many activities per day did I average this month? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT ROUND(COUNT(*)::numeric / EXTRACT(day FROM CURRENT_DATE), 2) AS avg_per_day FROM user_activity ua WHERE ua.user_id = 'abc-123' AND ua.activity_timestamp >= date_trunc('month', CURRENT_DATE)\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my cooldown activities [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_sub_activity uasa ON ua.user_activity_id = uasa.user_activity_id JOIN sub_activity sa ON uasa.sub_activity_id = sa.sub_activity_id WHERE ua.user_id = 'abc-123' AND sa.name ILIKE '%cooldown%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my pace improvement for running? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, (duration_val / 60.0) / (distance_val / 1000.0) AS pace_min_per_km FROM (SELECT ua.user_activity_id, ua.activity_timestamp, MAX(CASE WHEN ad.activity_detail_type = 'duration' THEN uad.duration_in_sec END) AS duration_val, MAX(CASE WHEN ad.activity_detail_type = 'distance' THEN uad.distance_in_meters END) AS distance_val FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id JOIN activity_detail ad ON uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'run') AND ad.use_for_pace_calculation = true GROUP BY ua.user_activity_id, ua.activity_timestamp) sub WHERE distance_val > 0 ORDER BY activity_timestamp ASC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"List activities tagged as easy [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND (ua.comments ILIKE '%easy%' OR ua.comments ILIKE '%light%' OR ua.comments ILIKE '%recovery%') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my Peloton rides [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.activity_name_override FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND (ua.comments ILIKE '%peloton%' OR ua.activity_name_override ILIKE '%peloton%') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my total active time today? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.duration_in_sec) AS total_seconds FROM user_activity ua JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ua.activity_timestamp::date = CURRENT_DATE AND uad.activity_detail_type = 'duration'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many yoga sessions this year? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT COUNT(*)::int AS yoga_count FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'yoga') AND ua.activity_timestamp >= date_trunc('year', CURRENT_DATE)\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show activities on my birthday [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND (ua.comments ILIKE '%birthday%' OR ua.activity_name_override ILIKE '%birthday%') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my most active day of the week? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT CASE EXTRACT(dow FROM ua.activity_timestamp) WHEN 0 THEN 'Sunday' WHEN 1 THEN 'Monday' WHEN 2 THEN 'Tuesday' WHEN 3 THEN 'Wednesday' WHEN 4 THEN 'Thursday' WHEN 5 THEN 'Friday' WHEN 6 THEN 'Saturday' END AS day_of_week, COUNT(*)::int AS activity_count FROM user_activity ua WHERE ua.user_id = 'abc-123' GROUP BY EXTRACT(dow FROM ua.activity_timestamp) ORDER BY activity_count DESC LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"List my cross training days [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'cross | training | crossfit') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my bench press workouts [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_sub_activity uasa ON ua.user_activity_id = uasa.user_activity_id JOIN sub_activity sa ON uasa.sub_activity_id = sa.sub_activity_id WHERE ua.user_id = 'abc-123' AND sa.name ILIKE '%bench%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my swimming distance trend? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, uad.distance_in_meters AS distance_m FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'swim') AND uad.activity_detail_type = 'distance' ORDER BY ua.activity_timestamp ASC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How did I feel during my last workout? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'workouts' ORDER BY ua.activity_timestamp DESC LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my ab workouts [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_sub_activity uasa ON ua.user_activity_id = uasa.user_activity_id JOIN sub_activity sa ON uasa.sub_activity_id = sa.sub_activity_id WHERE ua.user_id = 'abc-123' AND sa.name ILIKE '%ab%' OR sa.name ILIKE '%core%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my hiking total this year? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT COUNT(*)::int AS hike_count, SUM(uad.distance_in_meters) / 1000.0 AS total_km FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id LEFT JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id AND uad.activity_detail_type = 'distance' WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'hike | hiking') AND ua.activity_timestamp >= date_trunc('year', CURRENT_DATE)\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"List my planks [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, uad.duration_in_sec AS duration_seconds FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'plank') AND uad.activity_detail_type = 'duration' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my average biking speed? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT AVG((distance_val / 1000.0) / (duration_val / 3600.0)) AS avg_speed_kmh FROM (SELECT ua.user_activity_id, MAX(CASE WHEN ad.activity_detail_type = 'duration' THEN uad.duration_in_sec END) AS duration_val, MAX(CASE WHEN ad.activity_detail_type = 'distance' THEN uad.distance_in_meters END) AS distance_val FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id JOIN activity_detail ad ON uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'bike | cycling') GROUP BY ua.user_activity_id) sub WHERE duration_val > 0 AND distance_val > 0\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my warmup activities [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_sub_activity uasa ON ua.user_activity_id = uasa.user_activity_id JOIN sub_activity sa ON uasa.sub_activity_id = sa.sub_activity_id WHERE ua.user_id = 'abc-123' AND sa.name ILIKE '%warmup%' OR sa.name ILIKE '%warm up%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's my longest cycling ride? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, uad.distance_in_meters / 1000.0 AS distance_km FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'bike | cycling | cycle') AND uad.activity_detail_type = 'distance' ORDER BY uad.distance_in_meters DESC LIMIT 1\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How active was I in Q1? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT COUNT(*)::int AS activities, COUNT(DISTINCT ua.activity_timestamp::date)::int AS active_days FROM user_activity ua WHERE ua.user_id = 'abc-123' AND ua.activity_timestamp >= date_trunc('year', CURRENT_DATE) AND ua.activity_timestamp < date_trunc('year', CURRENT_DATE) + interval '3 months'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my dumbbell exercises [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, sa.name AS sub_activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN user_activity_sub_activity uasa ON ua.user_activity_id = uasa.user_activity_id JOIN sub_activity sa ON uasa.sub_activity_id = sa.sub_activity_id WHERE ua.user_id = 'abc-123' AND sa.name ILIKE '%dumbbell%' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What activities did I skip this week? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND ua.comments ILIKE '%skip%' AND ua.activity_timestamp >= date_trunc('week', CURRENT_DATE - interval '1 day') + interval '1 day' ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"List my breathing exercises [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'breathing | breath | breathwork') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show my power yoga sessions [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.activity_name_override FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_embedding ae ON a.activity_id = ae.activity_id WHERE ua.user_id = 'abc-123' AND ae.fts @@ to_tsquery('english', 'yoga') AND (ua.comments ILIKE '%power%' OR ua.activity_name_override ILIKE '%power%') ORDER BY ua.activity_timestamp DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"What's the breakdown of my workouts by type? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT a.name AS activity_type, COUNT(*)::int AS count FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id JOIN activity_category ac ON a.activity_category_id = ac.activity_category_id WHERE ua.user_id = 'abc-123' AND ac.activity_category_code = 'workouts' GROUP BY a.name ORDER BY count DESC\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"How many stairs did I climb? [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT SUM(uad.numeric_value)::int AS total_floors FROM user_activity ua JOIN activity_detail ad ON ad.activity_id = ua.activity_id JOIN user_activity_detail uad ON ua.user_activity_id = uad.user_activity_id AND uad.activity_detail_id = ad.activity_detail_id WHERE ua.user_id = 'abc-123' AND ad.label ILIKE '%floor%' OR ad.label ILIKE '%stair%'\"}"}]}
{"messages":[{"role":"system","content":"You are an expert Postgres SQL generator. Convert natural language to SQL. Output ONLY valid JSON with a sqlQuery field."},{"role":"user","content":"Show activities where I pushed myself [user_id: abc-123]"},{"role":"assistant","content":"{\"sqlQuery\":\"SELECT to_char(ua.activity_timestamp, 'Mon DD, YYYY') AS date, a.name AS activity, ua.comments FROM user_activity ua JOIN activity a ON ua.activity_id = a.activity_id WHERE ua.user_id = 'abc-123' AND (ua.comments ILIKE '%pushed%' OR ua.comments ILIKE '%challenge%' OR ua.comments ILIKE '%hard%') ORDER BY ua.activity_timestamp DESC\"}"}]}
